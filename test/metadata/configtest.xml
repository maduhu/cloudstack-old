<configtest>

	<command>
		<name>createUser</name>
		<parameters>
			<item random="true">
			    <name>username</name>
			</item>
			<item>
			    <name>password</name>
				<value>configuser</value>
			</item>
			<item>
				<name>firstname</name>
				<value>configuser</value>
			</item>
			<item>
				<name>lastname</name>
				<value>adminlastname</value>
			</item>
			<item>
				<name>email</name>
				<value>configuser@gmail.com</value>
			</item>
			<item>
				<name>accounttype</name>
				<value>0</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>id</name>
				<param>userid</param>
			</item>
			<item setparam="true">
				<name>username</name>
				<param>usernamevar</param>
			</item>
		</returnvalue>
	</command>
	
	<command>
		<name>register</name>
		<parameters>
			<item getparam="true">
			    <name>username</name>
				<param>usernamevar</param>
			</item>
			<item>
			    <name>domainid</name>
				<value>1</value>
			</item>
		</parameters>
		<returnvalue>
			<item value="false" setparam="true">
				<name>apikey</name>
				<param>apikey</param>
			</item>
			<item value="false" setparam="true">
				<name>secretkey</name>
				<param>secretkey</param>
			</item>
		</returnvalue>
	</command>	
	
	
<!-- Prepare configuration table for the future use -->
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.user.vms</value>
			</item>
			<item>
				<name>value</name>
				<value>1</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.user.vms</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>1</value>
				<param>maxvms</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.public.ips</value>
			</item>
			<item>
				<name>value</name>
				<value>2</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.public.ips</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>2</value>
				<param>maxips</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>account.cleanup.interval</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>account.cleanup.interval</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>accountcleanup</param>
			</item>
		</returnvalue>
	</command>	
	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>alert.wait</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>alert.wait</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>alertwait</param>
			</item>
		</returnvalue>
	</command>		
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>capacity.check.period</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>capacity.check.period</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>capacitycheck</param>
			</item>
		</returnvalue>
	</command>		
	

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>cpu.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>cpu.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>cputhreshold</param>
			</item>
		</returnvalue>
	</command>	

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>memory.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>memory.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>memorythreshold</param>
			</item>
		</returnvalue>
	</command>		

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.allocated.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.allocated.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>storageallocatedthreshold</param>
			</item>
		</returnvalue>
	</command>			


	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>storagethreshold</param>
			</item>
		</returnvalue>
	</command>		
	

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>private.ip.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>0.10</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>private.ip.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>0.10</value>
				<param>privateipthreshold</param>
			</item>
		</returnvalue>
	</command>		
	

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>public.ip.capacity.threshold</value>
			</item>
			<item>
				<name>value</name>
				<value>0.10</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>public.ip.capacity.threshold</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>0.10</value>
				<param>publicipthreshold</param>
			</item>
		</returnvalue>
	</command>		
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>expunge.interval</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>expunge.interval</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>expungeinterval</param>
			</item>
		</returnvalue>
	</command>		
	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>expunge.workers</value>
			</item>
			<item>
				<name>value</name>
				<value>20</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>expunge.workers</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>20</value>
				<param>expungeworkers</param>
			</item>
		</returnvalue>
	</command>		
		

	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>guest.ip.network</value>
			</item>
			<item>
				<name>value</name>
				<value>10.10.10.1</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>guest.ip.network</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>10.10.10.1</value>
				<param>guestip</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>guest.netmask</value>
			</item>
			<item>
				<name>value</name>
				<value>255.255.0.0</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>guest.netmask</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>255.255.0.0</value>
				<param>guestnetmask</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>instance.name</value>
			</item>
			<item>
				<name>value</name>
				<value>TEST1234</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>instance.name</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>TEST1234</value>
				<param>instancename</param>
			</item>
		</returnvalue>
	</command>		
	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>integration.api.port</value>
			</item>
			<item>
				<name>value</name>
				<value>8096</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>integration.api.port</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>8096</value>
				<param>apiport</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>host.stats.interval</value>
			</item>
			<item>
				<name>value</name>
				<value>30000</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>host.stats.interval</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>30000</value>
				<param>hoststats</param>
			</item>
		</returnvalue>
	</command>	

	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>multicast.throttling.rate</value>
			</item>
			<item>
				<name>value</name>
				<value>100</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>multicast.throttling.rate</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>100</value>
				<param>multicast</param>
			</item>
		</returnvalue>
	</command>		
	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>network.throttling.rate</value>
			</item>
			<item>
				<name>value</name>
				<value>100</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>network.throttling.rate</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>100</value>
				<param>unicast</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.overprovisioning.factor</value>
			</item>
			<item>
				<name>value</name>
				<value>10</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>storage.overprovisioning.factor</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>10</value>
				<param>storage</param>
			</item>
		</returnvalue>
	</command>		
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.aggregation.timezone</value>
			</item>
			<item>
				<name>value</name>
				<value>PST</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.aggregation.timezone</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>PST</value>
				<param>usagetimezone</param>
			</item>
		</returnvalue>
	</command>
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.stats.job.aggregation.range</value>
			</item>
			<item>
				<name>value</name>
				<value>60</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.stats.job.aggregation.range</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>60</value>
				<param>aggregrange</param>
			</item>
		</returnvalue>
	</command>	
		
		
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.stats.job.exec.time</value>
			</item>
			<item>
				<name>value</name>
				<value>17:45</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>listConfigurations</name>
		<parameters>
			<item>
				<name>name</name>
				<value>usage.stats.job.exec.time</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>value</name>
				<value>17:45</value>
				<param>usagejobtime</param>
			</item>
		</returnvalue>
	</command>		
	
		
		
<!-- Reboot the management server -->
	<command>
		<name>rebootManagementServer</name>
		<parameters>
			<item>
				<name>ip</name>
				<param>hostip</param>
			</item>
		</parameters>
	</command>
	
	
<!-- Test case #377 - verify  that regular user can't create more than max.account.user.vms-->
	<command>
		<name>deployVirtualMachine</name>
		<async>true</async>
		<usercommand>true</usercommand>
		<parameters>
			<item>
			    <name>serviceofferingid</name>
				<value>1</value>
			</item>
			<item>
			    <name>diskofferingid</name>
				<value>1</value>
			</item>		
			<item getparam="true">
				<name>templateid</name>
				<param>globaltemplateid</param>
			</item>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>deployVirtualMachine</name>
		<async>true</async>
		<testcase>377</testcase>
		<usercommand>true</usercommand>
		<error>true</error>
		<parameters>
			<item>
			    <name>serviceofferingid</name>
				<value>1</value>
			</item>
			<item>
			    <name>diskofferingid</name>
				<value>1</value>
			</item>	
			<item getparam="true">
				<name>templateid</name>
				<param>globaltemplateid</param>
			</item>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
		</parameters>
	</command>
	
<!-- Test case #378 - verify  that max.account.user.vms verify that it doesn't affect admin-->
	<command>
		<name>deployVirtualMachine</name>
		<async>true</async>
		<parameters>
			<item>
			    <name>serviceofferingid</name>
				<value>1</value>
			</item>
			<item>
			    <name>diskofferingid</name>
				<value>1</value>
			</item>	
			<item getparam="true">
				<name>templateid</name>
				<param>globaltemplateid</param>
			</item>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
			<item>
				<name>account</name>
				<value>admin</value>
			</item>
			<item>
				<name>domainid</name>
				<value>1</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>id</name>
				<param>vmid1</param>
			</item>
		</returnvalue>
	</command>
	
	<command>
		<name>deployVirtualMachine</name>
		<async>true</async>
		<testcase>378</testcase>
		<parameters>
			<item>
			    <name>serviceofferingid</name>
				<value>1</value>
			</item>
			<item>
			    <name>diskofferingid</name>
				<value>1</value>
			</item>	
			<item getparam="true">
				<name>templateid</name>
				<param>globaltemplateid</param>
			</item>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
			<item>
				<name>account</name>
				<value>admin</value>
			</item>
			<item>
				<name>domainid</name>
				<value>1</value>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>id</name>
				<param>vmid2</param>
			</item>
		</returnvalue>
	</command>
	
	
<!-- Test case #379 - verify  max.account.public.ips parameter doesn't affect admin-->
	<command>
		<name>associateIpAddress</name>
		<testcase>379</testcase>
		<parameters>
			<item getparam="true">
				    <name>zoneid</name>
					<param>globalzoneid</param>
				</item>
			<item>
				<name>account</name>
				<value>admin</value>
			</item>
			<item>
				<name>domainid</name>
				<value>1</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>associateIpAddress</name>
		<testcase>379</testcase>
		<parameters>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
			<item>
				<name>account</name>
				<value>admin</value>
			</item>
			<item>
				<name>domainid</name>
				<value>1</value>
			</item>
		</parameters>
	</command>

<!-- Test case #380 - verify  max.account.public.ips parameter affects regular user-->
	<command>
		<name>associateIpAddress</name>
		<usercommand>true</usercommand>	
		<testcase>380</testcase>
		<parameters>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
		</parameters>
		<returnvalue>
			<item setparam="true">
				<name>ipaddress</name>
				<param>userpublicip</param>
			</item>
		</returnvalue>
	</command>	
	
	<command>
		<name>associateIpAddress</name>
		<usercommand>true</usercommand>	
		<testcase>380</testcase>
		<error>true</error>
		<parameters>
			<item getparam="true">
			    <name>zoneid</name>
				<param>globalzoneid</param>
			</item>
		</parameters>
	</command>	


<!-- Execute cleanup - delete the user/destroy virtual machines; reset max allowed ips/vms for the regular user/reboot the management server-->
	<command>
		<name>deleteUser</name>
		<async>true</async>
		<parameters>
			<item getparam="true">
			    <name>id</name>
				<param>userid</param>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>destroyVirtualMachine</name>
		<async>true</async>
		<parameters>
			<item getparam="true">
				<name>id</name>
				<param>vmid1</param>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>destroyVirtualMachine</name>
		<async>true</async>
		<parameters>
			<item getparam="true">
				<name>id</name>
				<param>vmid2</param>
			</item>
		</parameters>
	</command>	
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.user.vms</value>
			</item>
			<item>
				<name>value</name>
				<value>100</value>
			</item>
		</parameters>
	</command>
	
	<command>
		<name>updateConfiguration</name>
		<parameters>
			<item>
				<name>name</name>
				<value>max.account.public.ips</value>
			</item>
			<item>
				<name>value</name>
				<value>100</value>
			</item>
		</parameters>
	</command>
	
	
	<!-- Reboot the management server -->
	<command>
		<name>rebootManagementServer</name>
		<parameters>
			<item>
				<name>ip</name>
				<param>hostip</param>
			</item>
		</parameters>
	</command>

</configtest>	